apiVersion: v1
kind: Service
metadata:
  name: mongodb
  namespace: codeclashers
  labels:
    app: mongodb
spec:
  type: NodePort  # Expose MongoDB externally for Lambda access (k3s doesn't support LoadBalancer)
  selector:
    app: mongodb
  ports:
  - port: 27017  # Must match MONGODB_PORT in app-secrets
    targetPort: 27017
    nodePort: 32017  # External port for Lambda access (<VM_IP>:32017)
    protocol: TCP
    name: mongodb

